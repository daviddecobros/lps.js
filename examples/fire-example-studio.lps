% load main program
consult('../lps/examples/fire-example.lps').

load_image(fire, 'https://png.icons8.com/cotton/64/gas-industry.png').
load_image(fireTruck, 'https://png.icons8.com/cotton/64/fire-truck.png').
load_image(fireStation, 'https://png.icons8.com/cotton/64/fire-station.png').
load_image(sofa, 'https://png.icons8.com/cotton/64/living-room.png').
load_image(grill, 'https://png.icons8.com/cotton/64/grill.png').

% define object positions
positionItem(sofa, 300, 100).
positionItem(grill, 420, 100).
positionItem(fireStation, 50, 100).

% draw fire station icon
true -> I = fireStation, positionItem(I, X, Y), draw_image(I, X, Y, 64, 64, fireStation, T1, T2).

% draw sofa icon
true -> I = sofa, positionItem(I, X, Y), draw_image(I, X, Y, 64, 64, sofa, T1, T2).

% draw grill icon
true -> I = grill, positionItem(I, X, Y), draw_image(I, X, Y, 64, 64, grill, T1, T2).

% draw fire for grill
true -> positionItem(grill, X, Y), draw_image(grillFire, X + 12, Y + 12, 48, 48, fire, T1, T2), hide(grillFire, T1, T2).

% draw fire for sofa
true -> positionItem(sofa, X, Y), draw_image(sofaFire, X + 12, Y + 12, 48, 48, fire, T1, T2), hide(sofaFire, T1, T2).

% draw fire truck
true ->
  positionItem(fireStation, X, Y),
  draw_image(fireTruck, X, Y, 64, 64, fireTruck, T1, T2),
  hide(fireTruck, T1, T2).

deployFirefighters(T1, T2) -> 
  show(fireTruck, T2, T3).

% when moving firefighter, move fire truck
moveFirefightersTo(Item, T1, T2) ->
  positionItem(Item, X, Y),
  move(fireTruck, X, Y, T3, T4).
  
% animate return to station
returnToStation(T1, T2) ->
  positionItem(fireStation, X, Y),
  move(fireTruck, X, Y, T2, T3),
  hide(fireTruck, T3, T4).

% show fire when ignited
ignite(sofa, T2, T) -> show(sofaFire, T, T1).
ignite(grill, T2, T) -> show(grillFire, T, T1).

% hide fire when put out
putOutFire(sofa, T1, T2) -> hide(sofaFire, T2, T3).
putOutFire(grill, T1, T2) -> hide(grillFire, T2, T3).
